<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 유튜브 콘텐츠 분석기</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- 모바일 최적화 메타태그 -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="유튜브분석기">
    
    <!-- 파비콘 및 아이콘 -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
    <div class="main-container">
        <!-- 왼쪽 사이드바 - 탭 구조 -->
        <div class="sidebar">
            <!-- 탭 네비게이션 -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="search" onclick="switchTab('search')">
                    <span class="tab-icon">🔍</span>
                    <span class="tab-text">검색</span>
                </button>
                <button class="tab-btn" data-tab="keyword-helper" onclick="switchTab('keyword-helper')">
                    <span class="tab-icon">🎯</span>
                    <span class="tab-text">키워드 도우미</span>
                </button>
            </div>

            <!-- 탭 컨텐츠 영역 -->
            <div class="tab-content-wrapper">
                
                <!-- 검색 탭 -->
                <div class="tab-content active" id="search-tab">
                    <!-- 메인 검색창 -->
                    <div class="main-search-section">
                        <div class="main-search">
                            <input type="text" id="searchQuery" placeholder="🔍 검색 키워드 입력 (예: 다이어트, 게임, 요리)" class="main-search-input">
                        </div>
                    </div>

                    <!-- 기본 설정 -->
                    <div class="setting-card basic-settings">
                        <div class="card-header">
                            <span class="card-icon">⚡</span>
                            <span class="card-title">기본 설정</span>
                        </div>
                        
                        <div class="card-content">
                            <div class="setting-grid">
                                <div class="setting-item">
                                    <label>정렬</label>
                                    <select id="orderBy" class="compact-select">
                                        <option value="date">최신순</option>
                                        <option value="relevance">관련성순</option>
                                        <option value="viewCount">조회수순</option>
                                        <option value="rating">평점순</option>
                                    </select>
                                </div>
                                
                                <div class="setting-item">
                                    <label>개수</label>
                                    <input type="number" id="maxResults" value="100" min="1" max="100" class="compact-input">
                                </div>
                                
                                <div class="setting-item">
                                    <label>국가</label>
                                    <select id="regionCode" class="compact-select">
                                        <option value="KR">🇰🇷 한국</option>
                                        <option value="">🌍 전세계</option>
                                        <option value="US">🇺🇸 미국</option>
                                        <option value="JP">🇯🇵 일본</option>
                                    </select>
                                </div>
                                
                                <div class="setting-item">
                                    <label>길이</label>
                                    <select id="videoDuration" class="compact-select">
                                        <option value="any">전체</option>
                                        <option value="short">쇼츠</option>
                                        <option value="longform">일반영상(중간+긴)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 날짜 설정 (기본 펼쳐짐) -->
                    <div class="setting-card">
                        <div class="card-header collapsible" onclick="toggleCard(this)">
                            <span class="card-icon">📅</span>
                            <span class="card-title">날짜 범위</span>
                            <span class="collapse-icon">▼</span>
                        </div>
                        
                        <div class="card-content">
                            <div class="date-range">
                                <div class="date-item">
                                    <label>시작</label>
                                    <input type="date" id="publishedAfter" class="compact-input">
                                </div>
                                <div class="date-separator">~</div>
                                <div class="date-item">
                                    <label>종료</label>
                                    <input type="date" id="publishedBefore" class="compact-input">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 고급 필터 (기본 펼쳐짐) -->
                    <div class="setting-card">
                        <div class="card-header collapsible" onclick="toggleCard(this)">
                            <span class="card-icon">🎛️</span>
                            <span class="card-title">고급 필터</span>
                            <span class="collapse-icon">▼</span>
                        </div>
                        
                        <div class="card-content">
                            <div class="filter-grid">
                                <div class="filter-group">
                                    <label>💪 영향력 지수</label>
                                    <input type="number" id="minInfluenceScore" placeholder="최소값" step="0.1" class="compact-input">
                                </div>
                                
                                <div class="filter-group">
                                    <label>👀 조회수 범위</label>
                                    <div class="range-inputs">
                                        <input type="number" id="minViewCount" placeholder="최소" class="compact-input range-input">
                                        <span class="range-separator">~</span>
                                        <input type="number" id="maxViewCount" placeholder="최대" class="compact-input range-input">
                                    </div>
                                </div>
                                
                                <div class="filter-group">
                                    <label>👥 구독자 범위</label>
                                    <div class="range-inputs">
                                        <input type="number" id="minSubscribers" placeholder="최소" class="compact-input range-input">
                                        <span class="range-separator">~</span>
                                        <input type="number" id="maxSubscribers" placeholder="최대" class="compact-input range-input">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 분석 버튼 섹션 추가 -->
                    <div class="setting-card analysis-section">
                        <div class="card-header">
                            <span class="card-icon">📊</span>
                            <span class="card-title">결과 분석</span>
                        </div>
                        
                        <div class="card-content">
                            <div class="analysis-info">
                                <p style="font-size: 13px; color: #6c757d; margin-bottom: 15px;">
                                    검색 완료 후 클릭하면 떡상 가능성, 경쟁 현황 등을 분석해드립니다.
                                </p>
                                <button class="analysis-trigger-btn" onclick="keywordHelper.analyzeCurrentResults()">
                                    <span class="btn-icon">📈</span>
                                    현재 결과 분석
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 키워드 도우미 탭 -->
                <div class="tab-content" id="keyword-helper-tab">
                    <div class="keyword-helper-content">
                        <div class="keyword-categories">
                            <h4>카테고리별 추천 키워드</h4>
                            <div class="category-buttons">
                                <button class="category-btn" data-category="health">🏥 건강</button>
                                <button class="category-btn" data-category="finance">💰 재정</button>
                                <button class="category-btn" data-category="hobby">🎨 취미</button>
                                <button class="category-btn" data-category="family">👨‍👩‍👧‍👦 가족</button>
                                <button class="category-btn" data-category="lifestyle">🏠 일상</button>
                                <button class="category-btn" data-category="info_channel">📋 정보채널</button>
                                <button class="category-btn" data-category="story_channel">📖 썰채널</button>
                            </div>
                        </div>
                        
                        <div class="keyword-suggestions" id="keywordSuggestions">
                            <p class="placeholder-text">위에서 카테고리를 선택하면 관련 키워드를 추천해드립니다.</p>
                        </div>
                        
                        <div class="quick-actions">
                            <button class="helper-btn" onclick="keywordHelper.generateRandomKeywords()">
                                🎲 랜덤 키워드
                            </button>
                            <button class="helper-btn" onclick="keywordHelper.analyzeCurrentResults()">
                                📊 결과 분석
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 하단 고정 버튼 영역 -->
            <div class="sidebar-footer">
                <button class="search-btn" onclick="startSearch()">
                    <span class="btn-icon">🚀</span>
                    분석 시작
                </button>
                <button class="favorites-btn" onclick="FavoritesManager.openFavoritesModal()">
                    <span class="btn-icon">⭐</span>
                    즐겨찾기
                </button>
                <button class="reset-btn" onclick="resetFilters()">
                    <span class="btn-icon">🔄</span>
                    초기화
                </button>
            </div>
        </div>
        
        <!-- 오른쪽 결과 영역 -->
        <div class="content-area">
            <div class="results-container">
                <div class="results-header">
                    <h3>검색 결과</h3>
                    <div id="results-count">검색을 시작해주세요</div>
                </div>
                
                <div id="results-content">
                    <div class="loading">
                        왼쪽에서 검색 조건을 설정하고 "분석 시작" 버튼을 클릭하세요.<br>
                        <strong>🎯 키워드 도우미</strong>를 활용하면 더 정확한 타겟팅이 가능합니다!
                    </div>
                </div>
                
                <div id="pagination" class="pagination"></div>
            </div>
        </div>
    </div>
    
    <!-- 자막 모달 -->
    <div id="captionModal" class="caption-modal">
        <div class="caption-content">
            <button class="close-btn" onclick="closeCaptionModal()">&times;</button>
            <h3>영상 자막</h3>
            <div id="captionText">로딩 중...</div>
        </div>
    </div>

    <!-- JavaScript 파일들을 순서대로 로드 -->
    <script src="js/config.js"></script>
    <script src="js/ui-utils.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/senior-keywords.js"></script>
    <script src="js/keyword-helper.js"></script>
    <script src="js/api.js"></script>
    <script src="js/data-processor.js"></script>
    <script src="js/table-manager.js"></script>
    <script src="js/main.js"></script>
    
    <!-- 탭 전환 스크립트 -->
    <script>
        function switchTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // 모든 탭 버튼과 컨텐츠 비활성화
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // 선택된 탭 활성화
            const targetButton = document.querySelector(`[data-tab="${tabName}"]`);
            const targetContent = document.getElementById(`${tabName}-tab`);
            
            if (targetButton && targetContent) {
                targetButton.classList.add('active');
                targetContent.classList.add('active');
                console.log('Tab switched successfully');
            } else {
                console.error('Tab elements not found:', tabName);
            }
        }
        
        // DOM이 완전히 로드된 후 실행
        window.addEventListener('load', function() {
            console.log('Page loaded, initializing tabs');
            switchTab('search');
        });
    </script>
</body>
</html>